import{j as e,G as I,r as x,_ as u,a as w,d as f,e as S,f as z,I as O,h as y,i as _,R as N,P as m,u as U,k,l as G,m as M,L as W}from"./index-BXLr0n2X.js";import{F as H}from"./index-DdwRNQqt.js";import{u as J,a as Q,H as K,b as V}from"./useDeleteProduct-sm9nV9NG.js";const X=()=>e.jsx("div",{className:"absolute inset-0 max-h-[50.2rem] max-w-full bg-cover bg-center bg-no-repeat z-[-10] bg-[url('/choose-services-bg.png')] laptop-m:max-h-[43.2rem] laptop:max-h-[43rem] laptop-s:max-h-[35.9rem] tab-l:max-h-[31.7rem] tab-m:max-h-[29.3rem] tab-s:max-h-[27.3rem]"});function Y(s){return I({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"},child:[]},{tag:"path",attr:{d:"M21 21l-6 -6"},child:[]}]})(s)}const Z=()=>{const s="http://35.154.167.170:3000",[n,o]=x.useState([]),[t,a]=x.useState(!0);return x.useEffect(()=>{(async()=>{var i;try{const d=await fetch(`${s}/web/services`,{method:"GET"}),c=await d.json();d.ok?o((i=c==null?void 0:c.data)==null?void 0:i.services):u.error("Failed to fetch services!")}catch{u.error("Failed to fetch services!")}finally{a(!1)}})()},[s]),{services:n,loading:t}},ee=()=>{const s="http://35.154.167.170:3000";return{fetchCategories:async o=>{try{const t=await fetch(`${s}/web/categories?service_id=${o}`,{method:"GET"}),a=await t.json();if(t.ok)return a==null?void 0:a.data;u.error("Failed to fetch categories!")}catch{u.error("Failed to fetch categories !")}}}},se=()=>{const{services:s,loading:n}=Z(),{fetchCategories:o}=ee(),t=w(),a=f(l=>l.service.selectedServiceId),[r,i]=x.useState(""),d=async l=>{t(S(l))},c=l=>{l.preventDefault(),r&&(i(""),u.success(r))};return x.useEffect(()=>{!n&&s.length>0&&(a||t(S(s[0].service_id)))},[n,s,a,t]),x.useEffect(()=>{a&&(async()=>{const p=await o(a);p&&(p.length>0?(t(y(p[0].category_category_id)),t(_(p))):(t(y(0)),t(_([]))))})()},[t,o,a]),n?e.jsx(z,{}):e.jsx("section",{className:"section-services",children:e.jsxs("div",{className:"secondary-container",children:[e.jsx("h1",{children:"Choose your Service"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"bg-white flex flex-col rounded-3xl shadow-lg laptop-m:rounded-2xl tab-s:rounded-xl",children:[e.jsx("div",{className:"flex justify-center gap-20 pt-12 px-12 border-b border-[#B9BCCF4D] laptop-l:gap-16 laptop-l:px-10 laptop-l:pt-10 laptop-m:pt-8 laptop-m:px-8 laptop-m:gap-12 laptop-s:px-6 laptop-s:pt-6 laptop-s:gap-8 tab-s:px-4 tab-s:pt-4 tab-s:gap-3",children:s.map(l=>{const{name:p,image:b,service_id:v}=l;return e.jsxs("div",{className:`service-container flex flex-col gap-8 items-center ${a===v?"active-service":""} laptop-l:gap-6 laptop-m:gap-4 tab-s:gap-2`,onClick:()=>d(v),children:[e.jsx("div",{className:"h-24 w-24 text-center laptop-l:h-20 laptop-l:w-20 laptop-m:h-16 laptop-m:w-16 laptop-s:h-14 laptop-s:w-14 tab-s:h-12 tab-s:w-12",children:e.jsx("img",{src:b,alt:"Service image",className:"inline-block max-h-full w-auto"})}),e.jsx("h4",{className:"service-name",children:p})]},p)})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-[0_0_17%] border-r border-[#B9BCCF4D] px-8 py-10 laptop-l:px-10 laptop-l:py-7  laptop-m:py-5 laptop-m:px-5 laptop-m:pl-8 laptop-s:px-4 laptop-s:py-4 laptop-s:pl-6 tab-s:px-4 tab-s:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(H,{className:"h-12 w-12 fill-[var(--primary)] laptop-l:h-10 laptop-l:w-10 laptop-m:h-8 laptop-m:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-4"}),e.jsx("p",{className:"text-[1.6rem] leading-[3rem] font-semibold text-[var(--black)] laptop-l:text-[1.5rem] laptop-l:leading-[2.5rem] laptop-m:text-[1.4rem] laptop-m:leading-normal laptop-s:text-[1.2rem] tab-s:text-[1rem]",children:"Paldi"}),e.jsx(O,{className:"h-10 w-10 laptop-l:h-8 laptop-l:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-4"})]})}),e.jsxs("form",{className:"flex-grow flex gap-4 px-8 py-6 laptop-l:px-10 laptop-l:py-3 laptop-m:px-8 laptop-m:py-2 laptop-s:px-6 laptop-s:py-1 tab-s:px-4",onSubmit:c,children:[e.jsx("label",{htmlFor:"search",className:"flex justify-center items-center",children:e.jsx(Y,{className:"h-12 w-12 stroke-[#687182] laptop-l:h-10 laptop-l:w-10 laptop-m:h-8 laptop-m:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-6"})}),e.jsx("input",{id:"search",type:"text",value:r,onChange:l=>i(l.target.value),placeholder:"Search here...",className:"flex-grow focus:outline-none text-[1.8rem] text-[var(--black)] leading-[2rem] laptop-l:text-[1.6rem] laptop-m:text-[1.4rem] laptop-m:leading-normal laptop-s:text-[1.2rem] tab-s:text-[1.2rem]"}),e.jsx("button",{type:"submit",className:"search-button",children:"Search"})]})]})]})})]})})},te=()=>e.jsxs("div",{className:"filter flex flex-col gap-12 laptop-l:gap-10 laptop-m:gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-filters",children:"Filters"}),e.jsx("h5",{className:"text-clear",children:"Clear all"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-stretch gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsx("p",{className:"dd-title",children:"select cloth types"}),e.jsxs("select",{className:"filter-dd",children:[e.jsx("option",{value:"shirt",children:"shirt"}),e.jsx("option",{value:"t-shirt",children:"t-shirt"}),e.jsx("option",{value:"pant",children:"pant"}),e.jsx("option",{value:"zabhbha/kurta",children:"shzabhbha/kurtairt"}),e.jsx("option",{value:"coat/blazer",children:"coat/blazer"})]}),e.jsxs("div",{className:"flex items-center justify-start flex-wrap gap-6",children:[e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"pant"}),e.jsx(N,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"shirt"}),e.jsx(N,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"t-shirt"}),e.jsx(N,{})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("p",{className:"dd-title",children:"Price"}),e.jsx("p",{className:"filter-price",children:"₹10 - ₹180"})]}),e.jsx("div",{children:e.jsx("form",{children:e.jsx("input",{type:"range",className:"input-range"})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[1.2rem]",children:"₹10"}),e.jsx("span",{className:"text-[1.2rem]",children:"₹500"})]})]})]}),ae=()=>{const[s,n]=x.useState(!1),o="http://35.154.167.170:3000",t=localStorage.getItem("token");return{addToCart:async({category_id:r,product_id:i,service_id:d,itemCount:c})=>{try{n(!0);const l=await fetch(`${o}/carts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({category_id:Number(r),product_id:i,service_id:d,quantity:c})}),p=await l.json();return l.ok?p==null?void 0:p.data:null}catch{return u.error("Error occur while adding item into cart!",{style:{maxWidth:"400px"}}),null}finally{n(!1)}},loading:s}},F=({categoryItem:s,category_id:n})=>{const o=U(),t=w(),[a,r]=x.useState(1),[i,d]=x.useState(null),[c,l]=x.useState(!1),[p,b]=x.useState(!1),v=f(h=>h.auth.isAuthenticated),{addToCart:R,loading:T}=ae(),{deleteProduct:q,loading:L}=J(),{updateCart:C,loading:P}=Q(),A=async()=>{const h=a+1;await C(i,{quantity:h})&&(r(h),t(k({cart_id:i,quantity:h})))},B=async()=>{if(a>0&&a-1!=0){const h=a-1;await C(i,{quantity:h})&&(r(h),t(k({cart_id:i,quantity:h})))}else await q(i)&&(l(!1),t(G(i)))},E=async(h,g)=>{if(!v)b(!0);else{const j=await R({category_id:n,product_id:h,service_id:g,itemCount:a});j?(d(j==null?void 0:j.cart_id),l(!0),t(M(j))):u.error("Failed to add item into cart!")}},$=()=>{b(!1)},D=()=>{o("/login")};return x.useEffect(()=>{var h,g;s!=null&&s.carts?(d((h=s==null?void 0:s.carts)==null?void 0:h.cart_id),r((g=s==null?void 0:s.carts)==null?void 0:g.quantity),l(!0)):(l(!1),r(1))},[s]),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("div",{className:"cat-item-container flex gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsx("img",{src:s.product.image,alt:"Service Image",className:"h-32 w-32 rounded-2xl laptop-l:h-28 laptop-l:w-28 laptop-m:h-24 laptop-m:w-24 laptop:h-20 laptop:w-20"}),e.jsxs("div",{className:"flex-grow flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-6 laptop-l:gap-4",children:[e.jsx("h5",{className:"cat-item-name",children:s.product.name}),e.jsxs("p",{className:"cat-item-price",children:["₹",s.price]})]}),c?e.jsx("button",{className:"inc-dec-btn relative overflow-hidden",children:P||L?e.jsx("span",{className:"h-[4.1rem] w-[8.8rem] flex justify-center items-center",children:e.jsx("span",{className:"inline-block h-8 w-8 rounded-full border-4 border-gray-200 border-t-[var(--secondary)] animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"py-[1.1rem] pl-[1.2rem] cursor-pointer",onClick:B,"aria-label":"Decrease item count",children:e.jsx(K,{className:"indec-icon"})}),a,e.jsx("span",{className:"py-[1.1rem] pr-[1.2rem] cursor-pointer",onClick:A,"aria-label":"Increase item count",children:e.jsx(V,{className:"indec-icon"})})]})}):e.jsx("button",{className:"add-btn","aria-label":"Add to cart",onClick:()=>E(s.product_id,s.service_id),children:T?e.jsx("span",{className:"inline-block mt-[-7.5px] mb-[-7.5px] h-8 w-8 rounded-full border-4 border-gray-200 border-t-[var(--secondary)] animate-spin"}):"Add"})]})]},s.product_id),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"info-login-container",children:[e.jsx("h2",{className:"text-center text-3xl font-bold leading-9 tracking-tight text-gray-900",children:"Login Required"}),e.jsx("p",{className:" text-red-500",children:"Please login to add items to your cart."}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:D,className:"py-4 px-8 rounded-xl bg-indigo-500 text-white font-medium hover:bg-indigo-400",children:"Login"}),e.jsx("button",{onClick:$,className:"py-4 px-8 rounded-xl bg-[#e4e6eb] font-medium",children:"Cancel"})]})]})})]})};F.propTypes={categoryItem:m.shape({carts:m.oneOfType([m.shape({cart_id:m.number.isRequired,quantity:m.number.isRequired}),m.string]),price:m.number.isRequired,service_id:m.number.isRequired,product_id:m.number.isRequired,product:m.shape({product_id:m.number.isRequired,name:m.string.isRequired,image:m.string.isRequired}).isRequired}).isRequired,category_id:m.number.isRequired};const le=()=>{const s="http://35.154.167.170:3000";return{fetchServiceItems:async(o,t)=>{try{const a=localStorage.getItem("token"),r={};a&&(r.Authorization=`Bearer ${a}`);const i=await fetch(`${s}/web/products?category_id=${o}&service_id=${t}`,{method:"GET",headers:r}),d=await i.json();if(i.ok)return d==null?void 0:d.data;u.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}catch{u.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}}}},ce=()=>{const s=w(),{fetchServiceItems:n}=le(),o=f(c=>c.category.categories),t=f(c=>c.service.selectedServiceId),a=f(c=>c.category.selectedCategoryId),[r,i]=x.useState([]);x.useEffect(()=>{t&&a&&(async()=>{const l=await n(a,t);l&&l.length>0&&i(l)})()},[a,t]);const d=c=>{s(y(c))};return e.jsxs("div",{className:"select-clothes-container",children:[e.jsx("h4",{className:"service-title",children:"Select Cloths"}),e.jsx("div",{className:"flex items-center gap-16 laptop-l:gap-12 laptop-m:gap-8",children:o.length>0?o.map(c=>{const{category_name:l,category_category_id:p}=c;return e.jsx("span",{className:`category-tags ${a===p?"active-tag":""}`,onClick:()=>d(p),children:l},p)}):"No category Found"}),e.jsx("div",{className:"flex flex-col gap-12 laptop-l:gap-10 laptop-m:gap-8",children:o.length>0&&r.map(c=>e.jsx(F,{categoryItem:c,category_id:a},c.product_id))})]})},re=()=>{const s=f(t=>{var a;return(a=t==null?void 0:t.cart)==null?void 0:a.subTotal}),n=f(t=>{var a,r;return(r=(a=t==null?void 0:t.setting)==null?void 0:a.settings)==null?void 0:r.shipping_charge}),o=f(t=>{var a;return(a=t==null?void 0:t.auth)==null?void 0:a.isAuthenticated});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card-container",children:[e.jsx("h5",{className:"cart-title",children:"cart"}),e.jsxs("div",{className:"px-12 py-12 flex flex-col gap-10 laptop-l:px-10 laptop-l:gap-9 laptop-m:px-8 laptop-m:py-10 laptop-m:gap-8",children:[e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Sub Total"}),e.jsxs("h5",{children:["₹",s||0]})]}),e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Shipping Charge"}),e.jsxs("h5",{children:["₹",!o||!s?0:n]})]}),e.jsx("span",{className:"line"}),e.jsxs("div",{className:"place-center total-container",children:[e.jsx("p",{children:"Total"}),e.jsxs("h5",{children:["₹",s&&n?Number(s)+Number(n):0]})]}),e.jsx(W,{to:"/cart",className:"view-cart-btn",children:"view cart"})]})]})})},ie=()=>e.jsx("section",{className:"pt-16 pb-48 laptop-l:pt-12 laptop-l:pb-40 laptop-m:pb-32 laptop:pb-24",children:e.jsx("div",{className:"services-con-container",children:e.jsxs("div",{className:"flex items-start justify-between gap-12 laptop:gap-8 laptop:justify-around",children:[e.jsx("div",{className:"flex-[0_0_27.78%] laptop:flex-[0_0_26%]",children:e.jsx(te,{})}),e.jsx("div",{className:"flex-[0_0_45.8%] laptop:flex-[0_0_39%]",children:e.jsx(ce,{})}),e.jsx("div",{className:"flex-[0_0_21.45%] laptop:flex-[0_0_22.5%]",children:e.jsx(re,{})})]})})}),de=()=>e.jsxs("div",{children:[e.jsx(X,{}),e.jsx(se,{}),e.jsx(ie,{})]});export{de as default};
